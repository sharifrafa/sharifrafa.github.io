<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CSC 225 Lab 6 - REST API</title>

  <!-- Bootstrap CDN -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>

<body class="bg-dark text-light p-4">

  <div class="container">

    <h2 class="mb-4">Cat Facts (REST API)</h2>

    <!-- Button to trigger API call -->
    <button class="btn btn-primary mb-3" onclick="loadCats()">
      Load Cat Facts
    </button>

    <!-- Image that will be updated -->
    <div class="mb-4">
      <img
        id="catImage"
        src="https://placehold.co/400x300"
        class="img-fluid rounded"
        alt="Cat Image"
      >
    </div>

    <!-- Table -->
    <table class="table table-dark table-bordered">
      <thead>
        <tr>
          <th>factId</th>
          <th>fact</th>
        </tr>
      </thead>
      <tbody id="factsTable">
        <!-- Data goes here -->
      </tbody>
    </table>

  </div>

  <script>
    function loadCats() {

      // Call the REST API using GET
      fetch("https://brianobruno.github.io/cats.json")
        .then(response => response.json())
        .then(data => {

          // Sort facts by factId (ascending)
          data.facts.sort((a, b) => a.factId - b.factId);

          // Get table body
          const table = document.getElementById("factsTable");
          table.innerHTML = ""; // clear old data

          // Add rows to table
          data.facts.forEach(item => {
            const row = `
              <tr>
                <td>${item.factId}</td>
                <td>${item.fact}</td>
              </tr>
            `;
            table.innerHTML += row;
          });

          // Update image on page
          document.getElementById("catImage").src = data.catPhoto;

        })
        .catch(error => {
          console.error("Error fetching data:", error);
        });
    }
  </script>

</body>
</html>

  
